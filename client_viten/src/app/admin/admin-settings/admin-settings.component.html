<div>
  <md-tab-group dynamicHeight="true">
  <md-tab label="{{ 'User settings' | translate }}">
    <div class="tabContent">
      <md-card>
        <md-card-title>{{ 'Email' | translate }}</md-card-title>
        <md-card-content>
          <!-- TODO: rewrite this with form controll -->
          <md-input-container>
            <input mdInput
              placeholder="{{user.email}}"
              #newEmail>
          </md-input-container>
        </md-card-content>
        <md-card-actions>
          <button md-raised-button color="primary" [disabled]='newEmail.value==user.email || newEmail.value== "" ' (click)="changeEmail(newEmail.value)">{{ 'Change email' | translate }}</button>
        </md-card-actions>
      </md-card>
      <md-card>
        <md-card-title>{{ 'Password' | translate }}</md-card-title>
        <md-card-content>
          <md-input-container>
            <input mdInput
              autocomplete="new-password"
              type="password"
              placeholder="{{ 'Minimum 4 characters' | translate }}"
              #newPassword>
              <md-hint align="end">{{newPassword.value.length}} / 4++</md-hint>
          </md-input-container>
          <br>
          <p>{{ 'Retype password' | translate }}</p>
          <md-input-container>
            <input mdInput
              [disabled]='newPassword.value.length <= 3 || newPassword.value== "" '
              type="password"
              placeholder="{{ 'Minimum 4 characters' | translate }}"
              #newPassword2>
              <md-hint align="end">
                {{newPassword2.value.length}} / 4++</md-hint>
          </md-input-container>
          <md-icon class="done" *ngIf="newPassword.value == newPassword2.value && !newPassword.value == '' ">done all</md-icon>
        </md-card-content>
        <md-card-actions>
          <button md-raised-button
            #passwordShangeButton
            color="primary"
            minlength="3"
            md-visible="true"
            [mdTooltip]="(newPassword.value.length <= 3 || !(newPassword.value == newPassword2.value) || newPassword.value== '') ?
              ('You need to write the same password twice' | translate ) : '' "
            mdTooltipPosition="below"
            [disabled]='newPassword.value.length <= 3 || !(newPassword.value == newPassword2.value) || newPassword.value== "" '
            (click)="changePassword(newPassword.value)">
            <div [mdTooltip]="(newPassword.value.length <= 3 || !(newPassword.value == newPassword2.value) || newPassword.value== '') ?
            ('You need to write the same password twice' | translate ) : '' "
            mdTooltipPosition="below">
              {{ 'Change password' | translate }}
            </div>
          </button>
        </md-card-actions>
      </md-card>
      <md-card>
        <md-card-title>{{ 'Language' | translate }}</md-card-title>
        <md-card-content>
          <p>
            {{ 'Change the preferred language here' | translate }}
          </p>
          <md-select [(ngModel)]="selectedLanguage" (change)='setSelectedLanguage()'>
            <md-option *ngFor="let m of [{name: 'English', code: 'en'}, {name: 'Norwegian', code: 'no'}]" [value]="m.code">
              {{ m.name | translate }}
            </md-option>
          </md-select>
        </md-card-content>
      </md-card>
    </div>
  </md-tab>
  <md-tab *ngIf="user.role=='admin'" label="{{ 'Admin settings' | translate }}">
    <div class="tabContent">
      <md-card>
        <md-card-title>{{ 'Superadmin settings' | translate }}</md-card-title>
        <md-card-subtitle>{{user.role | translate }}</md-card-subtitle>
        <md-card-actions>
          <button md-raised-button color="primary" minlength="3" (click)="requestReferral('admin')">
            {{ 'Request admin' | translate }}
          </button>
          <button md-raised-button color="primary" minlength="3" (click)="requestReferral('member')">
            {{ 'Request member' | translate }}
          </button>
        </md-card-actions>
      </md-card>
      <md-card>
        <md-card-title>{{ 'Delete account' | translate }}</md-card-title>
        <md-card-content>
          <table class="userTable">
            <tr>
              <th>{{ 'User ID' | translate }}</th>
              <th>{{ 'Email' | translate }}</th>
              <th>{{ 'Role' | translate }}</th>
            </tr>
            <tr *ngFor="let user of userList;  let i=index; let odd=odd; let even=even;"
            (click)="openDialog(user._id)"
            [ngClass]="{ odd: odd, even: even }">
            <td>{{user._id}}</td>
            <td>{{user.email}}</td>
            <td>{{user.role}}</td>
            <td><md-icon>delete_forever</md-icon></td>
          </tr>
        </table>
        <!-- <button md-raised-button color="warn" (click)="openDialog()">Delete!</button> -->
      </md-card-content>
    </md-card>
    </div>
  </md-tab>
</md-tab-group>
</div>
